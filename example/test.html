<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <style>
        p {
            display: block;
        }
    </style>
</head>
<body>
    <component 
        data-from="'Seller'" 
        datas="{{ datas }}" 
        icon="{{ icon }}" 
        hahas="{{ hahas }}"
        msg="{{ datas.toString() }}"
        change-seller="{{ changeSeller.bind(this) }}" 
        change-icon="{{ changeIcon }}"
    ></component>

    <component 
        data-from="'Seller'" 
        datas="{{ datas }}" 
        icon="{{ icon }}" 
        hahas="{{ hahas }}"
        msg="{{ datas.toString() }}"
        change-seller="{{ changeSeller.bind(this) }}" 
        change-icon="{{ changeIcon }}"
    ></component>
    <script src="../index.js"></script>
    <script>
        var app = Observer.watch(document.body, {
            datas: ['100', '200', '300'],
            hahas: ['gege', 'lc', '2121221'],
            icon: '$$',
            changeSeller: function() {
                    let now = Date.now()
                app.watcher.trackingUpdate({
                    datas: [1, 3, 4, 5, 6, 6,7]
                }, () => {

                        console.log(Date.now() - now);
                })
            },
            changeIcon: function() {
                app.watcher.trackingUpdate({
                    datas: [5, 0]
                });
            }
        });
        var button = Observer.createClass({
            data: {
                world: '<p>hh</p>',
            },
            template: `
                <div data-html>
                    {{ world }}
                </div>
                <button onclick="{{ changeSeller() }}">change Seller</button>
                <button onclick="{{ changeIcon() }}">change Icon</button>
            `
        });
        var Seller = Observer.createClass({
            data: {
                name: 'lc',
                left: '10px',
                handleName: function(name) {
                    return name + 1121211;
                },
                chgName: function() {
                    let now = Date.now()
                    this.trackingUpdate({
                        left: '100px'
                    }, () => {
                        console.log(Date.now() - now);
                        // console.log(document.getElementsByTagName('li')[0].innerHTML)
                    });
                }
            },
            willMount() {
            },
            didMount() {
                
            },
            willUpdate(prev, next) {

            },
            template: `
                <ul ref="ul" style="{{ {
                    background: 'red',
                    marginLeft: left
                } }}">
                    <li data-each="i in datas"> 
                        {{ handleName(name).toUpperCase()}} : <span>{{ datas[i] }}</span>{{ icon }} haha: {{ hahas[i > 2 ? 0 : i] }}
                    </li>
                    <input type="text" value="{{ msg.toUpperCase() }}"></input>
                </ul>
                <button onclick="{{ chgName() }}">chgname</button>
                <component 
                    data-from="'Button'" 
                    change-seller="{{ changeSeller }}" 
                    change-icon="{{ changeIcon }}"
                ></component>
            `,
            components: {
                Button: button
            }
        });
        Observer.registerComponent('Seller', Seller);
    </script>
</body>
</html>