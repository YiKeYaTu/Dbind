!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){(function(e){"use strict";e.Dbind=n(11).default}).call(t,function(){return this}())},function(e,t){"use strict";function n(e){return[].slice.call(e)}function r(e){var t=Date.now();return setTimeout(function(){e(Date.now()-t)})}function o(e){clearTimeout(e)}function i(e,t){return Object.prototype.toString.call(e).toLowerCase()==="[object "+t.toLowerCase()+"]"}function a(e){if(i(e,"array"))return e.map(function(e){return a(e)});if(i(e,"object")){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=a(e[n]));return t.__proto__=e.__proto__,t}return e}function s(){return Date.now()+Math.random()}function u(){var e=[].slice.call(arguments,1),t=arguments[0];return e.forEach(function(e){for(var n in e)t[n]=e[n]}),t}function c(e,t){if(i(e,"array"))e.forEach(function(e){for(;e;)t(e),c(e.firstElementChild,t),e=e.nextElementSibling});else for(;e;)t(e),c(e.firstElementChild,t),e=e.nextElementSibling}function l(e){return e.replace(/-(.)/g,function(e,t){return String.fromCharCode(t.charCodeAt(0)-32)})}function h(e){var t=e.split("");return t=t.map(function(e){var t=e.charCodeAt(0);return t>=65&&t<=90?"-"+String.fromCharCode(t+32):e}),t.join("")}Object.defineProperty(t,"__esModule",{value:!0}),t.toArray=n,t.delay=r,t.clearDelay=o,t.is=i,t.deepClone=a,t.randomId=s,t.objectAssign=u,t.walkElement=c,t.toHump=l,t.toHumpBack=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t,n){if(!(n instanceof h.default))throw new TypeError("watcher must extends from BaseWatcher");f[e]||(f[e]={});var r=f[e];r[t]?r[t][n.obId]=n:r[t]=o({},n.obId,n)}function a(e,t){return f[e]&&f[e][t]||null}function s(e){return f[e]}function u(e,t){delete f[e][t]}function c(e){f[e]=null}Object.defineProperty(t,"__esModule",{value:!0}),t.set=i,t.get=a,t.all=s,t.deleteOne=u,t.deleteAll=c;var l=n(7),h=r(l),f={}},function(e,t){"use strict";function n(e){return function(t,n){for(var r=0,o=e.length;r<o;r++,n++)if(t[n]!==e[r])return-1;return r-1}}function r(e,t){if(e===u)target=i;else{if(e!==c)throw new TypeError("type need to be normalStatement or onceStatement");target=a}target.start=t.start,target.end=t.end}function o(e){for(var t=e.length,n=[],r=[],o=[],i=-1,a=0;++i<t;){var v=e[i],m=o.length,_=r.length;if(0===m){var b=h(e,i),y=d(e,i),g=f(e,i),E=p(e,i);if(b>-1&&y===-1?(r.push(u),0===_&&(i+=b)):y>-1&&(r.push(c),0===_&&(i+=y)),b>-1||y>-1){0===_?n[a]&&a++:n[a].value+=e.slice(i,i+=b>-1?b:y);continue}if(g>-1&&r[_-1]===u||E>-1&&r[_-1]===c){r.pop(),1===_?(E>-1?i+=E:g>-1&&(i+=g),a++):n[a].value+=e.slice(i,i+=g>-1?g:E);continue}}n[a]||(n[a]={type:0===_?l:r[0],value:""}),s.test(v)&&_.length>0&&(m>0?"\\"!==e[i-1]&&o.pop():o.push(v)),n[a].value+=v}if(0!==o.length)throw new SyntaxError("Unexpected "+o.pop());return n}Object.defineProperty(t,"__esModule",{value:!0}),t.resetStatementSyb=r,t.default=o;var i={start:"{{",end:"}}"},a={start:"{{{",end:"}}}"},s=/['"]/,u=t.NOR_STATEMENT_TYPE="normalStatement",c=t.ONCE_STATEMENT_TYPE="onceStatement",l=t.CONST_STRING="constString",h=n(i.start),f=n(i.end),d=n(a.start),p=n(a.end)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentLifecycle=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1),a=(t.ComponentLifecycle=["didMount","willMount","willUpdate","shouldUpdate"],function(){function e(){r(this,e),this.watcher=null,this.element=null,this.refs=null,this.template=null,this.props=null,this.data=null,this.propTypes=null}return o(e,[{key:"init",value:function(e,t){this.watcher=e,this.props=t}},{key:"setDOMElement",value:function(e){this.element=e,this.__setRefs()}},{key:"trackingUpdate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=(0,i.objectAssign)({},this.data);for(var r in e)this.data[r]=e[r];this.watcher.obwatcher.reset(t,n,this.data)}},{key:"setProps",value:function(e){this.props=e}},{key:"__setRefs",value:function(){var e={};(0,i.walkElement)(this.element,function(t){var n=t.getAttribute&&t.getAttribute("ref");n&&(e[n]=t)}),this.refs=e}},{key:"didMount",value:function(){}},{key:"willMount",value:function(){}},{key:"willUpdate",value:function(){}},{key:"shouldUpdate",value:function(){return!0}}]),e}());t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return{data:e.data,trackingUpdate:e.trackingUpdate.bind(e)}}function a(e,t){for(var n in e)(0,p.is)(e[n],"function")&&(e[n]=e[n].bind(t))}function s(e){for(var t in e)(0,d.default)(t)}function u(e){return new v((0,p.randomId)(),e)}Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentManager=void 0;var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.createComponentManager=u;var l=n(4),h=r(l),f=n(6),d=r(f),p=n(1),v=t.ComponentManager=function(){function e(t,n){o(this,e),this.id=t,this.componentInf=n,this.trackingUpdate=null}return c(e,[{key:"createComponent",value:function(){var e=new h.default;e=(0,p.objectAssign)(e,(0,p.deepClone)(this.componentInf)),e.components=this.componentInf.components;var t=i(e);return a(e.data,t),s(e.components),e}}]),e}()},function(e,t,n){"use strict";function r(e){for(var t=0,n=e.length;t<n;t++){var r=e.charCodeAt(t);if(r>=65&&r<=90)throw new SyntaxError("Unexpected token "+e+", You should not use an uppercase component name")}document.createElement(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;n(1)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),u=n(16),c=r(u),l=n(15),h=r(l),f=n(8),d=r(f),p=n(18),v=r(p),m=n(13),_=r(m),b=n(14),y=r(b),g=n(3),E=r(g),M=n(2),T=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;o(this,e),this.obId=c,this.element=t,this.components=s,this.parentWatcher=u,this.obdata=n,this.previous=r,this.rendering=null,this.hasDelete=!1,this.modelExtractId=a,this.pastDOMInformation=this.__getPastDOMInformation(),this.obtype=this.__getType(i),this.obwatcher=this.__getWatcher(),this.__hangonModel(this.modelExtractId),this.render()}return a(e,[{key:"destructor",value:function(){this.hasDelete=!0,this.obwatcher.destructor()}},{key:"render",value:function(){this.obwatcher.render()}},{key:"reset",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};null!==this.rendering&&clearTimeout(this.rendering);var r=(0,s.objectAssign)({},this.obdata),o=(0,s.objectAssign)({},this.obdata);if("object"!==("undefined"==typeof e?"undefined":i(e)))throw new TypeError("data is not a object");for(var a in e)o[a]=e[a];this.obdata=o,this.rendering=(0,s.delay)(function(e){t.hasDelete||t.obwatcher.reset(n,r,o),t.rendering=null,n()})}},{key:"trackingUpdate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=[];for(var r in e)e.hasOwnProperty(r)&&n.push((0,M.get)(this.modelExtractId,r));this.runResetWatcher(n,e,t)}},{key:"runResetWatcher",value:function(e,t,n){(0,y.default)(e,t,n)}},{key:"__getWatcher",value:function(){var t=null;switch(this.obtype){case e.ManagerWatcher:t=c.default;break;case e.ElementWatcher:t=h.default;break;case e.TextWatcher:t=v.default;break;case e.ComponentWatcher:t=d.default}return new t(this,e)}},{key:"__getType",value:function(t){if(null!==t)return t;var n=this.element.nodeType,r=this.element.nodeName.toLowerCase();if(3===n)return e.TextWatcher;if(1===n){for(var o=this.pastDOMInformation.attr,i=!1,a=0,s=o.length;a<s;a++)if(o[a].name===c.default.instructions[0]){i=!0;break}return i?e.ManagerWatcher:d.default.nodeName===r||d.default.components[r]||this.components&&this.components[r]?e.ComponentWatcher:e.ElementWatcher}throw"watcher只能接受元素节点或者文本节点"}},{key:"__getPastDOMInformation",value:function(){return{parentNode:this.element.parentNode,nextSibling:this.element.nextSibling,textContent:this.element.textContent,innerHTML:this.element.innerHTML,nodeType:this.element.nodeType,nodeName:this.element.nodeName,attr:this.__getAttr(),display:this.__getDisplay()}}},{key:"__getDisplay",value:function(){return this.element.nodeType!==e.TextWatcher&&getComputedStyle(this.element).display}},{key:"__getAttr",value:function(){return this.element.attributes?(0,s.toArray)(this.element.attributes):[]}},{key:"__getWatcherType",value:function(e){return e.type}},{key:"__filterAttr",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.pastDOMInformation.attr.filter(function(n){return t?e.indexOf(n.name)>-1:e.indexOf(n.name)===-1})}},{key:"__hangonModel",value:function(){var e=this,t=this.obwatcher.model;t&&t.forEach(function(t){(0,M.set)(e.modelExtractId,t,e)})}},{key:"getChildId",value:function(e){return this.obId+"."+e}},{key:"removeAttr",value:function(e){this.element.removeAttribute(e)}},{key:"modelExtract",value:function(e){return(0,_.default)(e)}},{key:"traversalPrevious",value:function(e){for(var t=this.previous;t&&e(t)!==!1;)t=t.previous}},{key:"statementExtract",value:function(e){return(0,E.default)(e)}},{key:"execStatement",value:function(e){return new Function("data","with(data) { return "+e+";}")(this.obdata)}}]),e}();T.ManagerWatcher=1,T.ElementWatcher=2,T.TextWatcher=3,T.ComponentWatcher=4,t.default=T},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(4),s=(r(a),n(5)),u=n(1),c=n(3),l=n(2),h=function(){function e(t,n){o(this,e),this.base=t,this.BaseWatcher=n,this.modelExtractId=(0,u.randomId)(),this.instructions=this.__getInstructions(),this.props=this.__getProps(),this.model=this.__getModel(),this.componentManager=this.__getComponentManager(),this.component=this.componentManager&&this.componentManager.createComponent(),this.__removeRootNode()}return i(e,[{key:"destructor",value:function(){this.childWatcher&&this.childWatcher.forEach(function(e){e.destructor()}),(0,l.deleteAll)(this.modelExtractId),this.childWatcher=[]}},{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};this.componentManager&&(this.resolvedProps=this.__bindProps(),this.component.init(this.base,this.resolvedProps),this.child=this.__renderComponent(),this.component.setDOMElement(this.child),this.component.willMount(),this.data=(0,u.objectAssign)({},this.component.props,this.component.data),this.childWatcher=this.__setChildWatcher(),this.component.didMount(),e())}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=(arguments[1],arguments[2],this.__getComponentManager());if(!t||this.componentManager&&t.id===this.componentManager.id)if(t){var n=this.resolvedProps,r=[];if(this.resolvedProps=this.__bindProps(),!this.component.shouldUpdate(n,this.resolvedProps))return;this.component.setProps(this.resolvedProps),this.component.willUpdate(n,this.resolvedProps);for(var o in n)if(n[o]!==this.component.props[o]){var i=(0,l.get)(this.modelExtractId,o);this.data[o]=this.component.props[o],i&&r.push(i)}for(var a in this.component.data)if(this.component.data[a]!==this.data[a]){var s=(0,l.get)(this.modelExtractId,a);this.data[a]=this.component.data[a],s&&r.push(s)}this.base.runResetWatcher(r,this.data,e)}else this.destructor();else this.componentManager=t,this.component=this.componentManager.createComponent(),this.destructor(),this.render(e)}},{key:"__removeRootNode",value:function(){var e=this.base.element;e.parentNode.removeChild(e)}},{key:"__setChildWatcher",value:function(){var e=this,t=null;return this.child.map(function(n,r){return new e.BaseWatcher(n,(0,u.objectAssign)({},e.data),t,null,e.modelExtractId,e.component.components,e.base,e.base.getChildId(r))})}},{key:"__bindProps",value:function(){var e=this,t={};return this.props.normalProps.forEach(function(e){t[e.name]=e.value[0].value}),this.props.obProps.forEach(function(n){var r=null;n.value.forEach(function(t){if(t.type===c.NOR_STATEMENT_TYPE||t.type===c.ONCE_STATEMENT_TYPE){var n=e.base.execStatement(t.value);null===r?r=n:r+=n}else null===r?r=t.value:r+=t.value}),t[n.name]=r}),t}},{key:"__renderComponent",value:function(){if(this.component){var e=document.createDocumentFragment(),t=document.createElement("div"),n=this.base.pastDOMInformation.parentNode;"string"==typeof this.component.template?t.innerHTML=this.component.template:"function"==typeof this.component.template&&(t.innerHTML=this.component.template());for(var r=(0,u.toArray)(t.childNodes);t.childNodes[0];)e.appendChild(t.childNodes[0]);return n.insertBefore(e,this.base.pastDOMInformation.nextSibling),r}}},{key:"__getComponentManager",value:function(){var t=this.base.execStatement(this.instructions[e.instructions[0]]),n=this.base.pastDOMInformation.nodeName.toLowerCase(),r=null;return n===e.nodeName?"string"==typeof t?this.base.components&&this.base.components[t]?r=this.base.components[t]:e.components[t]&&(r=e.components[t]):t instanceof s.ComponentManager&&(r=t):this.base.components&&this.base.components[n]?r=this.base.components[n]:e.components[n]&&(r=e.components[n]),r}},{key:"__getInstructions",value:function(){var t={};return this.base.__filterAttr(e.instructions,!0).forEach(function(e){t[e.name]=e.value}),t}},{key:"__getProps",value:function(){var t=this,n=this.base.__filterAttr(e.instructions,!1),r=[],o=[];return n.forEach(function(e){var n=t.base.statementExtract(e.value),i=!1,a={};a.name=(0,u.toHump)(e.name),a.value=n.map(function(e){return e.type!==c.NOR_STATEMENT_TYPE&&e.type!==c.ONCE_STATEMENT_TYPE||(i=!0),e}),i===!0?r.push(a):o.push(a)}),{obProps:r,normalProps:o}}},{key:"__getModel",value:function(){var e=this.__getInstructionsModel(),t=this.__getPropsModel();return e.concat(t)}},{key:"__getInstructionsModel",value:function(){var e=[];for(var t in this.instructions)this.base.modelExtract(this.instructions[t]).forEach(function(t){e.push(t.value)});return e}},{key:"__getPropsModel",value:function(){var e=this,t=[];return this.props.obProps.forEach(function(n){n.value.forEach(function(n){n.type===c.NOR_STATEMENT_TYPE&&e.base.modelExtract(n.value).forEach(function(e){t.push(e.value)})})}),t}}]),e}();h.nodeName="component",h.instructions=["data-from","data-props"],h.components={},t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){(0,u.default)(e),a.default.components[e]=t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=n(8),a=r(i),s=n(6),u=r(s)},function(e,t){"use strict";function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t,n){e.addEventListener?e.addEventListener(t,n):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n}function o(e){return e.dataset&&e.dataset.obId}function i(e,t,r){var i=o(e);s[i]?s[i][t]?s[i][t].push(r):s[i][t]=[r]:s[i]=n({},t,[r])}Object.defineProperty(t,"__esModule",{value:!0}),t.on=i;for(var a=t.events=["onafterprint","onbeforeprint","onbeforeunload","onerror","onhaschange","onload","onmessage","onoffline","ononline","onpagehide","onpageshow","onpopstate","onredo","onresize","onstorage","onundo","onunload","onblur","onchange","oncontextmenu","onfocus","onformchange","onforminput","oninvalid","onreset","onselect","onsubmit","onkeydown","onkeypress","onkeyup","onclick","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onscroll","onabort","oncanplay","oncanplaythrough","ondurationchange","onemptied","onended","onerror","onloadeddata","onloadedmetadata","onloadstart","onpause","onplay","onplaying","onprogress","onratechange","onreadystatechange","onseeked","onseeking","onstalled","onsuspend","ontimeupdate","onvolumechange","onwaiting"],s=(t.noBubblesEvents=["abort","blur"],{}),u=function(e,t){var n=a[e].slice(2);r(document,n,function(e){var t=e.target,r=o(t),i=s[r]&&s[r][n];i&&i.map(function(t){return t(e)})})},c=0,l=a.length;c<l;c++)u(c,l)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),i=(r(o),n(12)),a=r(i),s=n(9),u=r(s),c=n(5);t.default={createClass:function(e){return(0,c.createComponentManager)(e)},registerComponent:function(e,t){return(0,u.default)(e,t)},watch:function(e,t){return new(Function.prototype.bind.apply(a.default,[null].concat(Array.prototype.slice.call(arguments))))}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(7),s=r(a),u=n(1),c=(n(2),function(){function e(t,n){o(this,e),this.DOM=t,this.data=n,this.modelId=(0,u.randomId)(),this.init()}return i(e,[{key:"init",value:function(){this.watcher=new s.default(this.DOM,this.data,null,null,this.modelId)}}]),e}());t.default=c},function(e,t){"use strict";function n(e){for(var t=e.length,n=[],_=[],b=[],y={},g=-1,E=-1;++g<t;){var M=e[g],T=b[b.length-1],k=_[_.length-1];if(!p.test(M))if(M.match(r)){if(k&&a.test(k)||T&&c.test(T)&&!d.test(k))for(;++g<t&&o.test(e[g]););else{for(n[++E]={index:g,value:M};++g<t&&o.test(e[g]);)n[E].value+=e[g];if(y[n[E].value]?(E--,n.pop()):y[n[E].value]=!0,m[n[E].value]===!0)throw new SyntaxError("Unexpected function, in Observer statement you can't use function")}g--,_.pop()}else if(i.test(M)){for(;++g<t&&(e[g]!==M||v.test(e[g-1])););_.pop()}else c.test(M)||s.test(M)||h.test(M)?(_.pop(),b.push(M)):l.test(M)||u.test(M)||f.test(M)?b.pop():d.test(M)||a.test(M)?_.push(M):_.pop()}return n}Object.defineProperty(t,"__esModule",{value:!0});var r=/[a-zA-Z_$]/,o=/[a-zA-Z_$0-9]/,i=/['"]/,a=/\./,s=/\[/,u=/\]/,c=/\{/,l=/\}/,h=/\(/,f=/\)/,d=/:/,p=/\s/,v=/\\/,m={function:!0};t.default=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r=0,o=0;e.forEach(function(e){if(e)for(var i in e)o++,e[i].reset(t,function(){r++,r===o&&n()})})}},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(10),u=n(1),c=n(3),l=function(){function e(t,n){o(this,e),this.base=t,this.BaseWatcher=n,this.__setObIdAttr(),this.instructions=this.__getInstructions(),this.instructionsList=this.instructions.map(function(e){return e.name}),this.instructionsModel=null,this.events=this.__getEvents(),this.attrs=this.__getAttrs(),this.model=this.__getModel(),this.renderCount=0,this.rendering=!1,this.resolvedInstructions=null,this.renderInf=null,this.childWatchers=null}return a(e,[{key:"destructor",value:function(){var e=this.base.element;e.parentNode.removeChild(e),this.__destructorChild()}},{key:"render",value:function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};this.resolvedInstructions=this.__execInstructions(),this.renderInf=this.__handleResolvedInstructions(),this.renderInf.shouldRender||null===this.renderInf.shouldRender?(this.renderInf.shouldRender&&this.__setBaseElementDisplay(this.base.pastDOMInformation.display),this.__bindAttrs(),this.renderInf.shouldInit&&this.__bindEvents(),this.childWatchers||this.__setChildWatcher()):(this.childWatchers&&(this.__destructorChild(),this.base.element.innerHTML=this.base.pastDOMInformation.innerHTML),this.__setBaseElementDisplay("none"))}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=arguments[1],n=arguments[2];t!==n&&this.render(e)}},{key:"__destructorChild",value:function(){this.childWatchers&&this.childWatchers.forEach(function(e){return e.destructor()}),this.childWatchers=null}},{key:"__setChildWatcher",value:function(){var t=this;e.escapeNode.indexOf(this.base.pastDOMInformation.nodeName.toLowerCase())>-1||(this.renderInf.shouldRenderHtml?this.childWatchers=[new this.BaseWatcher(this.base.element,(0,u.objectAssign)({},this.base.obdata),null,this.BaseWatcher.TextWatcher,this.base.modelExtractId,this.base.components,this.base)]:!function(){var e=null;t.childWatchers=(0,u.toArray)(t.base.element.childNodes).map(function(n,r){var o=new t.BaseWatcher(n,(0,u.objectAssign)({},t.base.obdata),e,null,t.base.modelExtractId,t.base.components,t.base,t.base.getChildId(r));return e=o,o})}())}},{key:"__setBaseElementDisplay",value:function(e){this.base.element.style.display=e}},{key:"__setObIdAttr",value:function(){this.base.element.setAttribute("data-ob-id",this.base.obId)}},{key:"__getInstructionsModel",value:function(){var e=this,t=[];return this.instructionsModel={},this.instructions.forEach(function(n){e.base.modelExtract(n.value).forEach(function(r){t.push(r.value),e.instructionsModel[n.name]=r.value})}),this.hasElseInstruction()&&(t=t.concat(this.__getPrevIfInstructionModel())),t}},{key:"__getPrevIfInstructionModel",value:function(){var t=this,n=null;return this.base.traversalPrevious(function(r){return r.obtype===t.BaseWatcher.TextWatcher||r.obtype!==t.BaseWatcher.ManagerWatcher&&(r.obwatcher.hasElseIfInstruction()?(n=r.obwatcher.instructionsModel[e.instructions[2]],!1):r.obwatcher.hasIfInstruction()?(n=r.obwatcher.instructionsModel[e.instructions[1]],!1):void 0)}),n}},{key:"__getModel",value:function(){var e=this.__getInstructionsModel(),t=this.__getAttrsModel();return e.concat(t)}},{key:"__getAttrsModel",value:function(){var e=this,t=[];return this.attrs.obattrs.forEach(function(n){n.value.forEach(function(n){n.type===c.NOR_STATEMENT_TYPE&&e.base.modelExtract(n.value).forEach(function(e){t.push(e.value)})})}),t}},{key:"hasIfInstruction",value:function(){return this.instructionsList.indexOf(e.instructions[0])>-1}},{key:"hasElseInstruction",value:function(){return this.instructionsList.indexOf(e.instructions[1])>-1}},{key:"hasElseIfInstruction",value:function(){return this.instructionsList.indexOf(e.instructions[2])>-1}},{key:"hasHtmlInstruction",value:function(){return this.instructionsList.indexOf(e.instructions[3])>-1}},{key:"__getInstructions",value:function(){var t=this;return this.base.__filterAttr(e.instructions,!0).map(function(e){return t.base.removeAttr(e.name),{name:e.name,value:e.value}})}},{key:"__getAttrs",value:function(){var t=this,n=this.base.__filterAttr(s.events.concat(e.instructions),!1),r=[],o=[];return n.forEach(function(e){var n=t.base.statementExtract(e.value),i=!1,a={};a.name=e.name,a.value=n.map(function(e){return e.type!==c.NOR_STATEMENT_TYPE&&e.type!==c.ONCE_STATEMENT_TYPE||(i=!0),e}),i===!0?r.push(a):o.push(a)}),{obattrs:r,normalAttrs:o}}},{key:"__getEvents",value:function(){var e=this,t=this.base.__filterAttr(s.events),n=[],r=[],o=[];return t.forEach(function(t){var i=e.base.statementExtract(t.value),a={};if(a.name=t.name,a.value=i[0].value,i.length>1)throw"";i[0].type===c.NOR_STATEMENT_TYPE?n.push(a):i[0].type===c.ONCE_STATEMENT_TYPE?r.push(a):o.push(a)}),{obEvents:n,onceEvents:r,normalEvents:o}}},{key:"__bindEvents",value:function(){var e=this,t=[this.events.obEvents,this.events.onceEvents];t.forEach(function(t,n){if(0!==t.length){var r=1===n?(0,u.deepClone)(e.base.obdata):e.base.obdata;t.forEach(function(t){e.base.element[t.name]=null,e.base.removeAttr(t.name),(0,s.on)(e.base.element,t.name.substring(2),function(e){new Function("data, $event","with(data) { "+t.value+" }")(r,e)})})}})}},{key:"__bindAttrs",value:function(){var e=this;this.attrs.obattrs.forEach(function(t){var n="";t.value.forEach(function(t){n+=t.type===c.NOR_STATEMENT_TYPE||t.type===c.ONCE_STATEMENT_TYPE?e.__toString(e.base.execStatement(t.value)):t.value}),e.base.element.setAttribute(t.name,n)})}},{key:"__toString",value:function(e){if((0,u.is)(e,"object")){var t="";for(var n in e)t+=(0,u.toHumpBack)(n)+":"+e[n]+";";return t}return e}},{key:"__execInstructions",value:function(){var e=this,t={};return this.instructions.forEach(function(n){t[n.name]=e.base.execStatement(n.value)}),t}},{key:"__handleResolvedInstructions",value:function(){var t={shouldRender:null,shouldRenderHtml:!1,shouldInit:null};for(var n in this.resolvedInstructions){var r=this.resolvedInstructions[n];this[e.instructionsHandle[n]](r,t)}return t.shouldInit=(t.shouldRender===!0||null===t.shouldRender)&&0===this.renderCount,0===this.renderCount&&t.shouldRender===!1&&this.renderCount--,this.renderCount++,t}},{key:"__handleIfInstruction",value:function(e,t){return t.shouldRender=!!e}},{key:"__handleElseIfInstruction",value:function(e,t){var n=this.__handleIfInstruction(e,t),r=this.__handleElseInstruction(e,t);return t.shouldRender=n&&r}},{key:"__handleElseInstruction",value:function(e,t){var n=this,r=!1,o=!0;if(this.base.traversalPrevious(function(e){return e.obtype===n.BaseWatcher.TextWatcher||e.obtype!==n.BaseWatcher.ManagerWatcher&&(!e.obwatcher.hasElseInstruction()&&(null!==e.obwatcher.renderInf.shouldRender&&(e.obwatcher.renderInf.shouldRender===!0&&(o=!1),e.obwatcher.hasIfInstruction()?(r=!0,!1):void 0)))}),!r)throw new SyntaxError("Unexpected else");return t.shouldRender=o,o}},{key:"__handleHtmlInstruction",value:function(e,t){t.shouldRenderHtml=!0}}]),e}();l.instructions=["data-if","data-else","data-else-if","data-html"],l.escapeNode=["script"],l.instructionsHandle=(i={},r(i,l.instructions[0],"__handleIfInstruction"),r(i,l.instructions[1],"__handleElseInstruction"),r(i,l.instructions[2],"__handleElseIfInstruction"),r(i,l.instructions[3],"__handleHtmlInstruction"),i),t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),u=(n(2),n(17)),c=r(u),l=function(){function e(t,n){i(this,e),this.base=t,this.BaseWatcher=n,this.instruction=this.__getInstruction(),this.vector=null,this.model=this.__getModel(),this.parameter=this.__getParameter(),this.childWacther=null,this.__check(),this.__removeRootElement()}return a(e,[{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.__setChildWatcher(e),this.__appendChildWatcherToDOM(e)}},{key:"reset",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},arguments[1]),t=arguments[2],n=e[this.vector].length,r=t[this.vector].length;if(n<r)this.render(n);else if(n>r){for(var o=r;o<n;o++)this.childWacther[o].destructor();this.childWacther=this.childWacther.slice(0,r)}}},{key:"__appendChildWatcherToDOM",value:function(e){for(var t=document.createDocumentFragment(),n=this.base.pastDOMInformation.nextSibling,r=e,i=this.childWacther.length;r<i;r++)t.appendChild(this.childWacther[r][0]);n?n.parentNode.insertBefore(t,n):this.base.pastDOMInformation.parentNode.appendChild(t);for(var a=e,s=this.childWacther.length;a<s;a++)this.childWacther[a]=new(Function.prototype.bind.apply(this.BaseWatcher,[null].concat(o(this.childWacther[a]))))}},{key:"__check",value:function(){var e=/[a-zA-Z_$][a-zA-Z_$0-9]*(\s*,\s*[a-zA-Z_$][a-zA-Z_$0-9]*){0,2}\s*in\s*/.test(this.instruction.value);if(!e)throw""}},{key:"__setChildWatcher",value:function(e){var t=this,n=new Function("data","with(data) { return "+this.vector+" }")(this.base.obdata).slice(e),r=[];if((0,c.default)(n,function(o,i){(0,s.is)(n,"array")&&(o+=e),i+=e;var a=(0,s.objectAssign)({},t.base.obdata);a[t.parameter[0]]=o,t.parameter[1]&&(a[t.parameter[1]]=i),r.push([t.__cloneElement(t.base.element.innerHTML),a,t.base.previous,null,t.base.modelExtractId,t.base.components,t.base,t.base.getChildId(i)])}),e>0)for(var o=0,i=r.length;o<i;o++)this.childWacther.push(r[o]);else this.childWacther=r}},{key:"__removeRootElement",value:function(){var e=this.base.element;e.parentNode.removeChild(e)}},{key:"__cloneElement",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=this.base.element.cloneNode();return n.innerHTML=t,n.removeAttribute(e.instructions[0]),n}},{key:"__getModel",value:function(){var t=this,n=[],r=!1;return this.base.modelExtract(this.instruction.value).forEach(function(o){r&&n.push(o.value),o.value===e.eachSplitInstructionChar&&(r=!0,t.vector=t.instruction.value.slice(o.index+e.eachSplitInstructionChar.length).replace(/\s/g,""))}),n.length>0?n:null}},{key:"__getParameter",value:function(){var t=[],n=!1;return this.base.modelExtract(this.instruction.value).forEach(function(r){r.value===e.eachSplitInstructionChar&&(n=!0),!n&&t.push(r.value)}),t}},{key:"__getInstruction",value:function(){return this.base.__filterAttr(e.instructions,!0)[0]}}]),e}();l.instructions=["data-each"],l.eachSplitInstructionChar="in",t.default=l},function(e,t,n){"use strict";function r(e,t){if(!(0,o.is)(t,"function"))throw new TypeError("cb is not a function");if((0,o.is)(e,"array"))e.forEach(function(e,n){t(n,n)});else if((0,o.is)(e,"object")){var n=0;for(var r in e)e.hasOwnProperty(r)&&t(r,n++)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(1)},function(e,t,n){"use strict";
function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(19),s=r(a),u=n(3),c=(n(1),function(){function e(t){o(this,e),this.base=t,this.watcherType=this.base.pastDOMInformation.nodeType,this.vm=this.__getViewModel(),this.model=this.__parseModel(),this.view=null}return i(e,[{key:"destructor",value:function(){var e=this.base.element;e.parentNode.removeChild(e)}},{key:"render",value:function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};this.view=this.__parseView(),this.watcherType===e.textNodeWatcher?this.base.element.textContent=this.view:this.base.element.innerHTML=this.view}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=arguments[1],n=arguments[2];t!==n&&this.render(e)}},{key:"__getViewModel",value:function(){var t=this.watcherType===e.textNodeWatcher,n=t?this.base.pastDOMInformation.textContent:this.base.pastDOMInformation.innerHTML;return this.__replaceOnceStatement(this.base.statementExtract(n))}},{key:"__replaceOnceStatement",value:function(e){var t=this;return e.map(function(e){return e.type===u.ONCE_STATEMENT_TYPE&&(e.type=u.CONST_STRING,e.value=t.base.execStatement(e.value)),e})}},{key:"__parseView",value:function(){var e=this,t="";return this.vm.forEach(function(n){t+=n.type===u.NOR_STATEMENT_TYPE?e.__toString(e.base.execStatement(n.value)):e.__toString(n.value)}),t}},{key:"__toString",value:function(e){return(0,s.default)(e)}},{key:"__parseModel",value:function(){var e=this,t=[];return this.vm.forEach(function(n){n.type===u.NOR_STATEMENT_TYPE&&e.base.modelExtract(n.value).forEach(function(e){t.push(e.value)})}),t}}]),e}());c.textNodeWatcher=3,c.innerHTMLWatcher=1,t.default=c},function(e,t){"use strict";function n(e){var t=e.nodeName.toLowerCase(),n=toArray(e.attributes).map(function(e){return e.name+"='"+e.value+"'"}).join("s");return"<"+t+" "+n+">"+e.innerHTML+"</"+t+">"}function r(e){return e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e instanceof HTMLElement?n(e):r(e)}}]);