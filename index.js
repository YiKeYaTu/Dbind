!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(4),s=(r(i),n(7)),u=r(s),c=n(9),l=r(c),h=n(5),f=(n(1),function(){function e(){o(this,e)}return a(e,null,[{key:"createClass",value:function(e){return(0,h.createComponentManager)(e)}},{key:"registerComponent",value:function(e,t){u.default.components[e]=t}},{key:"render",value:function(e,t,n){}},{key:"watch",value:function(e,t){return new(Function.prototype.bind.apply(l.default,[null].concat(Array.prototype.slice.call(arguments))))}}]),e}());!function(){"undefined"!=typeof moudle&&moudle.exports?moudle.exports=f:window.Observer=f}(window)},function(e,t){"use strict";function n(e){return[].slice.call(e)}function r(e){var t=Date.now();setTimeout(function(){e(Date.now()-t)})}function o(e,t){return Object.prototype.toString.call(e).toLowerCase()==="[object "+t.toLowerCase()+"]"}function a(e){if(!o(e,"array")){if(o(e,"object")){var t={};for(var n in e)t[n]=a(e[n]);return t}return e}e=e.map(function(e){return a(e)})}function i(){return Date.now()+Math.random()}function s(){var e=[].slice.call(arguments,1),t=arguments[0];return e.forEach(function(e){for(var n in e)t[n]=e[n]}),t}function u(e,t){if(o(e,"array"))e.forEach(function(e){for(;e;)t(e),u(e.firstElementChild,t),e=e.nextElementSibling});else for(;e;)t(e),u(e.firstElementChild,t),e=e.nextElementSibling}Object.defineProperty(t,"__esModule",{value:!0}),t.toArray=n,t.delay=r,t.is=o,t.deepClone=a,t.randomId=i,t.objectAssign=s,t.walkElement=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){if(!(n instanceof u.default))throw new TypeError("watcher must extends from BaseWatcher");c[e]||(c[e]={});var r=c[e];r[t]?r[t].push(n):r[t]=[n]}function a(e,t){return c[e]&&c[e][t]||null}function i(e){return c[e]}Object.defineProperty(t,"__esModule",{value:!0}),t.set=o,t.get=a,t.all=i;var s=n(6),u=r(s),c={}},function(e,t){"use strict";function n(e){return function(t,n){for(var r=0,o=e.length;r<o;r++,n++)if(t[n]!==e[r])return-1;return r}}function r(e,t){if(e===u)target=a;else{if(e!==c)throw new TypeError("type need to be normalStatement or onceStatement");target=i}target.start=t.start,target.end=t.end}function o(e){for(var t=e.length,n=[],r=[],o=[],a=-1,i=0;++a<t;){var p=e[a],m=o.length,_=r.length;if(0===m){var b=h(e,a),y=d(e,a),g=f(e,a),E=v(e,a);if(b>-1&&y===-1?(r.push(u),0===_&&(a+=b)):y>-1&&(r.push(c),0===_&&(a+=y)),b>-1||y>-1){0===_?n[i]&&i++:n[i].value+=e.slice(a,a+=b>-1?b:y);continue}if(g>-1&&r[_-1]===u||E>-1&&r[_-1]===c){r.pop(),1===_?(a+=g>-1?g:E,i++):n[i].value+=e.slice(a,a+=g>-1?g:E);continue}}n[i]||(n[i]={type:0===_?l:r[0],value:""}),s.test(p)&&_.length>0&&(m>0?"\\"!==e[a-1]&&o.pop():o.push(p)),n[i].value+=p}if(0!==o.length)throw new SyntaxError("Unexpected "+o.pop());return n}Object.defineProperty(t,"__esModule",{value:!0}),t.resetStatementSyb=r,t.default=o;var a={start:"{{",end:"}}"},i={start:"{{{",end:"}}}"},s=/['"]/,u=t.NOR_STATEMENT_TYPE="normalStatement",c=t.ONCE_STATEMENT_TYPE="onceStatement",l=t.CONST_STRING="constString",h=n(a.start),f=n(a.end),d=n(i.start),v=n(i.end)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentLifecycle=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),i=(t.ComponentLifecycle=["didMount","willMount","willUpdate","shouldUpdate"],function(){function e(){r(this,e),this.watcher=null,this.element=null,this.refs=null,this.template=null,this.props=null,this.data=null}return o(e,[{key:"init",value:function(e,t,n){this.watcher=e,this.element=t,this.props=n,this.__setRefs()}},{key:"trackingUpdate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=(0,a.objectAssign)({},this.data);for(var r in e)this.data[r]=e[r];this.watcher.obwatcher.reset(t,n,this.data)}},{key:"setProps",value:function(e){this.props=e}},{key:"__setRefs",value:function(){var e={};(0,a.walkElement)(this.element,function(t){var n=t.getAttribute&&t.getAttribute("ref");n&&(e[n]=t)}),this.refs=e}},{key:"didMount",value:function(){}},{key:"willMount",value:function(){}},{key:"willUpdate",value:function(){}},{key:"shouldUpdate",value:function(){return!0}}]),e}());t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e){return new l((0,c.randomId)(),e)}Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentManager=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.createComponentManager=a;var s=n(4),u=r(s),c=n(1),l=t.ComponentManager=function(){function e(t,n){o(this,e),this.id=t,this.componentInf=n,this.trackingUpdate=null}return i(e,[{key:"createComponent",value:function(){var e=new u.default;e=(0,c.objectAssign)(e,(0,c.deepClone)(this.componentInf)),e.components=this.componentInf.components;var t={data:e.data,trackingUpdate:e.trackingUpdate.bind(e)};for(var n in e.data)(0,c.is)(e.data[n],"function")&&(e.data[n]=e.data[n].bind(t));return e}}]),e}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),u=n(12),c=r(u),l=n(11),h=r(l),f=n(7),d=r(f),v=n(14),p=r(v),m=n(10),_=r(m),b=n(3),y=r(b),g=n(2),E=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;o(this,e),this.obId=c,this.element=t,this.components=s,this.parentWatcher=u,this.obdata=n,this.previous=r,this.rendering=!1,this.modelExtractId=i,this.pastDOMInformation=this.__getPastDOMInformation(),this.obtype=this.__getType(a),this.obwatcher=this.__getWatcher(),this.__hangonModel(this.modelExtractId),this.render()}return i(e,[{key:"render",value:function(){this.obwatcher.render()}},{key:"reset",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};if(this.rendering!==!0){var r=(0,s.objectAssign)({},this.obdata),o=(0,s.objectAssign)({},this.obdata);if(this.rendering=!0,"object"!==("undefined"==typeof e?"undefined":a(e)))throw new TypeError("data is not a object");for(var i in e)o[i]=e[i];this.obdata=o,(0,s.delay)(function(e){t.obwatcher.reset(n,r,o),n(),t.rendering=!1})}}},{key:"trackingUpdate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=[];for(var r in e)e.hasOwnProperty(r)&&n.push((0,g.get)(this.modelExtractId,r));var o=0,a=0;n.forEach(function(n){n&&n.forEach(function(n){a++,n.reset(e,function(){o++,o===a&&t()})})})}},{key:"__getWatcher",value:function(){var t=null;switch(this.obtype){case e.ManagerWatcher:t=c.default;break;case e.ElementWatcher:t=h.default;break;case e.TextWatcher:t=p.default;break;case e.ComponentWatcher:t=d.default}return new t(this,e)}},{key:"__getType",value:function(t){if(null!==t)return t;var n=this.element.nodeType,r=this.element.nodeName.toLowerCase();if(3===n)return e.TextWatcher;if(1===n){for(var o=this.pastDOMInformation.attr,a=!1,i=0,s=o.length;i<s;i++)if(o[i].name===c.default.instructions[0]){a=!0;break}return a?e.ManagerWatcher:d.default.nodeNames.indexOf(r)>-1?e.ComponentWatcher:d.default.components[r]?e.ComponentWatcher:e.ElementWatcher}throw"watcher只能接受元素节点或者文本节点"}},{key:"__getPastDOMInformation",value:function(){return{parentNode:this.element.parentNode,nextSibling:this.element.nextSibling,textContent:this.element.textContent,innerHTML:this.element.innerHTML,nodeType:this.element.nodeType,nodeName:this.element.nodeName,attr:this.__getAttr(),display:this.__getDisplay()}}},{key:"__getDisplay",value:function(){return this.element.nodeType!==e.TextWatcher&&getComputedStyle(this.element).display}},{key:"__getAttr",value:function(){return this.element.attributes?(0,s.toArray)(this.element.attributes):[]}},{key:"__getWatcherType",value:function(e){return e.type}},{key:"__filterAttr",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.pastDOMInformation.attr.filter(function(n){return t?e.indexOf(n.name)>-1:e.indexOf(n.name)===-1})}},{key:"__hangonModel",value:function(){var e=this,t=this.obwatcher.model;t&&t.forEach(function(t){(0,g.set)(e.modelExtractId,t,e)})}},{key:"getChildId",value:function(e){return this.obId+"."+e}},{key:"removeAttr",value:function(e){this.element.removeAttribute(e)}},{key:"modelExtract",value:function(e){return(0,_.default)(e)}},{key:"traversalPrevious",value:function(e){for(var t=this.previous;t&&e(t)!==!1;)t=t.previous}},{key:"statementExtract",value:function(e){return(0,y.default)(e)}},{key:"execStatement",value:function(e){return new Function("data","with(data) { return "+e+";}")(this.obdata)}}]),e}();E.ManagerWatcher=1,E.ElementWatcher=2,E.TextWatcher=3,E.ComponentWatcher=4,t.default=E},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(4),u=(r(s),n(5)),c=n(1),l=n(3),h=n(2),f=function(){function e(t,n){o(this,e),this.base=t,this.BaseWatcher=n,this.modelExtractId=(0,c.randomId)(),this.instruction=this.__getInstruction(),this.props=this.__getProps(),this.componentManager=this.__getComponentManager(),this.component=this.componentManager.createComponent(),this.model=this.__getModel(),this.__remove()}return i(e,[{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};this.componentManager&&(this.child=this.__renderComponent(),this.resolvedProps=this.__bindProps(),this.component.init(this.base,this.child,this.resolvedProps),this.component.willMount(),this.data=(0,c.objectAssign)({},this.component.props,this.component.data),this.childWatcher=this.__setChildWatcher(),this.component.didMount(),e())}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=this;arguments[1],arguments[2];if(this.__getComponentManager().id!==this.componentManager.id)this.childWatcher.forEach(function(e){e.base.element.parent.removeChild(e.base.element)}),this.render(e);else{var n=function(){var n=t.resolvedProps,r=[];if(t.resolvedProps=t.__bindProps(),!t.component.shouldUpdate(n,t.resolvedProps))return{v:void 0};t.component.setProps(t.resolvedProps),t.component.willUpdate(n,t.resolvedProps);for(var o in n)if(n[o]!==t.component.props[o]){var a=(0,h.get)(t.modelExtractId,o);t.data[o]=t.component.props[o],a&&r.push(a)}for(var i in t.component.data)if(t.component.data[i]!==t.data[i]){var s=(0,h.get)(t.modelExtractId,i);t.data[i]=t.component.data[i],s&&r.push(s)}var u=0,c=0;r.forEach(function(n){n&&n.forEach(function(n){c++,n.reset(t.data,function(){u++,u===c&&e()})})})}();if("object"===("undefined"==typeof n?"undefined":a(n)))return n.v}}},{key:"__remove",value:function(){var e=this.base.element;e.parentNode.removeChild(e)}},{key:"__setChildWatcher",value:function(){var e=this,t=null;return this.child.map(function(n,r){return new e.BaseWatcher(n,(0,c.objectAssign)({},e.data),t,null,e.modelExtractId,e.component.components,e.base,e.base.getChildId(r))})}},{key:"__bindProps",value:function(){var e=this,t={};return this.props.normalProps.forEach(function(e){t[e.name]=e.value[0].value}),this.props.obProps.forEach(function(n){var r=null;n.value.forEach(function(t){if(t.type===l.NOR_STATEMENT_TYPE||t.type===l.ONCE_STATEMENT_TYPE){var n=e.base.execStatement(t.value);null===r?r=n:r+=n}else null===r?r=t.value:r+=t.value}),t[n.name]=r}),t}},{key:"__renderComponent",value:function(){if(this.component){var e=document.createDocumentFragment(),t=document.createElement("div"),n=this.base.pastDOMInformation.parentNode;t.innerHTML=this.component.template;for(var r=(0,c.toArray)(t.childNodes);t.childNodes[0];)e.appendChild(t.childNodes[0]);return n.insertBefore(e,this.base.pastDOMInformation.nextSibling),r}}},{key:"__getComponentManager",value:function(){var t=this.base.execStatement(this.instruction.value),n=null;return"string"==typeof t?e.components[t]?n=e.components[t]:this.base.components[t]&&(n=this.base.components[t]):t instanceof u.ComponentManager&&(n=t),n}},{key:"__getInstruction",value:function(){return this.base.__filterAttr(e.instructions,!0)[0]}},{key:"__getProps",value:function(){var t=this,n=this.base.__filterAttr(e.instructions,!1),r=[],o=[];return n.forEach(function(e){var n=t.base.statementExtract(e.value),a=!1,i={};i.name=e.name.replace(/-(.)/,function(e,t){return String.fromCharCode(t.charCodeAt(0)-32)}),i.value=n.map(function(e){return e.type!==l.NOR_STATEMENT_TYPE&&e.type!==l.ONCE_STATEMENT_TYPE||(a=!0),e}),a===!0?r.push(i):o.push(i)}),{obProps:r,normalProps:o}}},{key:"__getModel",value:function(){var e=this.__getInstructionsModel(),t=this.__getPropsModel();return e.concat(t)}},{key:"__getInstructionsModel",value:function(){var e=[];return this.base.modelExtract(this.instruction.value).forEach(function(t){e.push(t.value)}),e}},{key:"__getPropsModel",value:function(){var e=this,t=[];return this.props.obProps.forEach(function(n){n.value.forEach(function(n){n.type===l.NOR_STATEMENT_TYPE&&e.base.modelExtract(n.value).forEach(function(e){t.push(e.value)})})}),t}}]),e}();f.nodeNames=["component"],f.instructions=["data-from"],f.components={},t.default=f},function(e,t){"use strict";function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t,n){e.addEventListener?e.addEventListener(t,n):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n}function o(e){return e.dataset&&e.dataset.obId}function a(e,t,r){var a=o(e);s[a]?s[a][t]?s[a][t].push(r):s[a][t]=[r]:s[a]=n({},t,[r])}Object.defineProperty(t,"__esModule",{value:!0}),t.on=a;for(var i=t.events=["onafterprint","onbeforeprint","onbeforeunload","onerror","onhaschange","onload","onmessage","onoffline","ononline","onpagehide","onpageshow","onpopstate","onredo","onresize","onstorage","onundo","onunload","onblur","onchange","oncontextmenu","onfocus","onformchange","onforminput","oninvalid","onreset","onselect","onsubmit","onkeydown","onkeypress","onkeyup","onclick","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onscroll","onabort","oncanplay","oncanplaythrough","ondurationchange","onemptied","onended","onerror","onloadeddata","onloadedmetadata","onloadstart","onpause","onplay","onplaying","onprogress","onratechange","onreadystatechange","onseeked","onseeking","onstalled","onsuspend","ontimeupdate","onvolumechange","onwaiting"],s={},u=function(e,t){var n=i[e].slice(2);r(document,n,function(e){var t=e.target,r=o(t),a=s[r]&&s[r][n];a&&a.map(function(t){return t(e)})})},c=0,l=i.length;c<l;c++)u(c,l)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(6),s=r(i),u=n(1),c=(n(2),function(){function e(t,n){o(this,e),this.DOM=t,this.data=n,this.modelId=(0,u.randomId)(),this.init()}return a(e,[{key:"init",value:function(){var e=this;(0,u.delay)(function(){e.watcher=new s.default(e.DOM,e.data,null,null,e.modelId)})}}]),e}());t.default=c},function(e,t){"use strict";function n(e){for(var t=e.length,n=[],_=[],b=[],y={},g=-1,E=-1;++g<t;){var w=e[g],M=b[b.length-1],I=_[_.length-1];if(!v.test(w))if(w.match(r)){if(I&&i.test(I)||M&&c.test(M)&&!d.test(I))for(;++g<t&&o.test(e[g]););else{for(n[++E]={index:g,value:w};++g<t&&o.test(e[g]);)n[E].value+=e[g];if(y[n[E].value]?(E--,n.pop()):y[n[E].value]=!0,m[n[E].value]===!0)throw new SyntaxError("Unexpected function, in Observer statement you can't use function")}g--,_.pop()}else if(a.test(w)){for(;++g<t&&(e[g]!==w||p.test(e[g-1])););_.pop()}else c.test(w)||s.test(w)||h.test(w)?(_.pop(),b.push(w)):l.test(w)||u.test(w)||f.test(w)?b.pop():d.test(w)||i.test(w)?_.push(w):_.pop()}return n}Object.defineProperty(t,"__esModule",{value:!0});var r=/[a-zA-Z_$]/,o=/[a-zA-Z_$0-9]/,a=/['"]/,i=/\./,s=/\[/,u=/\]/,c=/\{/,l=/\}/,h=/\(/,f=/\)/,d=/:/,v=/\s/,p=/\\/,m={function:!0};t.default=n},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(8),u=n(1),c=n(3),l=function(){function e(t,n){o(this,e),this.base=t,this.BaseWatcher=n,this.__setObIdAttr(),this.instructions=this.__getInstructions(),this.instructionsList=this.instructions.map(function(e){return e.name}),this.instructionsModel=null,this.events=this.__getEvents(),this.attrs=this.__getAttrs(),this.model=this.__getModel(),this.renderCount=0,this.rendering=!1,this.resolvedInstructions=null,this.renderInf=null,this.childWatchers=null}return i(e,[{key:"render",value:function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};this.resolvedInstructions=this.__execInstructions(),this.renderInf=this.__handleResolvedInstructions(),this.renderCount++,this.renderInf.shouldRender||null===this.renderInf.shouldRender?(this.renderInf.shouldRender&&this.__setBaseElementDisplay(this.base.pastDOMInformation.display),this.__bindAttrs(),(this.renderInf.shouldInit||null===this.renderInf.shouldInit)&&(this.__bindEvents(),this.__setChildWatcher())):this.__setBaseElementDisplay("none")}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=arguments[1],n=arguments[2];t!==n&&this.render(e)}},{key:"__setBaseElementDisplay",value:function(e){this.base.element.style.display=e}},{key:"__setObIdAttr",value:function(){this.base.element.setAttribute("data-ob-id",this.base.obId)}},{key:"__getInstructionsModel",value:function(){var e=this,t=[];return this.instructionsModel={},this.instructions.forEach(function(n){e.base.modelExtract(n.value).forEach(function(r){t.push(r.value),e.instructionsModel[n.name]=r.value})}),this.hasElseInstruction()&&(t=t.concat(this.__getPrevIfInstructionModel())),t}},{key:"__getPrevIfInstructionModel",value:function(){var t=this,n=null;return this.base.traversalPrevious(function(r){return r.obtype===t.BaseWatcher.TextWatcher||r.obtype!==t.BaseWatcher.ManagerWatcher&&(r.obwatcher.hasElseIfInstruction()?(n=r.obwatcher.instructionsModel[e.instructions[2]],!1):r.obwatcher.hasIfInstruction()?(n=r.obwatcher.instructionsModel[e.instructions[1]],!1):void 0)}),n}},{key:"__getModel",value:function(){var e=this.__getInstructionsModel(),t=this.__getAttrsModel();return e.concat(t)}},{key:"__getAttrsModel",value:function(){var e=this,t=[];return this.attrs.obattrs.forEach(function(n){n.value.forEach(function(n){n.type===c.NOR_STATEMENT_TYPE&&e.base.modelExtract(n.value).forEach(function(e){t.push(e.value)})})}),t}},{key:"hasIfInstruction",value:function(){return this.instructionsList.indexOf(e.instructions[0])>-1}},{key:"hasElseInstruction",value:function(){return this.instructionsList.indexOf(e.instructions[1])>-1}},{key:"hasElseIfInstruction",value:function(){return this.instructionsList.indexOf(e.instructions[2])>-1}},{key:"hasHtmlInstruction",value:function(){return this.instructionsList.indexOf(e.instructions[3])>-1}},{key:"__getInstructions",value:function(){var t=this;return this.base.__filterAttr(e.instructions,!0).map(function(e){return t.base.removeAttr(e.name),{name:e.name,value:e.value}})}},{key:"__getAttrs",value:function(){var t=this,n=this.base.__filterAttr(s.events.concat(e.instructions),!1),r=[],o=[];return n.forEach(function(e){var n=t.base.statementExtract(e.value),a=!1,i={};i.name=e.name,i.value=n.map(function(e){return e.type!==c.NOR_STATEMENT_TYPE&&e.type!==c.ONCE_STATEMENT_TYPE||(a=!0),e}),a===!0?r.push(i):o.push(i)}),{obattrs:r,normalAttrs:o}}},{key:"__getEvents",value:function(){var e=this,t=this.base.__filterAttr(s.events),n=[],r=[],o=[];return t.forEach(function(t){var a=e.base.statementExtract(t.value),i={};if(i.name=t.name,i.value=a[0].value,a.length>1)throw"";a[0].type===c.NOR_STATEMENT_TYPE?n.push(i):a[0].type===c.ONCE_STATEMENT_TYPE?r.push(i):o.push(i)}),{obEvents:n,onceEvents:r,normalEvents:o}}},{key:"__bindEvents",value:function(){var e=this,t=[this.events.obEvents,this.events.onceEvents];t.forEach(function(t,n){if(0!==t.length){var r=1===n?(0,u.deepClone)(e.base.obdata):e.base.obdata;t.forEach(function(t){e.base.element[t.name]=null,e.base.removeAttr(t.name),(0,s.on)(e.base.element,t.name.substring(2),function(e){new Function("data, $event","with(data) { "+t.value+" }")(r,e)})})}})}},{key:"__bindAttrs",value:function(){var e=this;this.attrs.obattrs.forEach(function(t){var n="";t.value.forEach(function(t){n+=t.type===c.NOR_STATEMENT_TYPE||t.type===c.ONCE_STATEMENT_TYPE?e.base.execStatement(t.value):t.value}),e.base.element.setAttribute(t.name,n)})}},{key:"__execInstructions",value:function(){var e=this,t={};return this.instructions.forEach(function(n){t[n.name]=e.base.execStatement(n.value)}),t}},{key:"__setChildWatcher",value:function(){var t=this;e.escapeNode.indexOf(this.base.pastDOMInformation.nodeName.toLowerCase())>-1||(this.renderInf.shouldRenderHtml?this.childWatchers=[new this.BaseWatcher(this.base.element,(0,u.objectAssign)({},this.base.obdata),null,this.BaseWatcher.TextWatcher,this.base.modelExtractId,this.base.components,this.base)]:!function(){var e=null;t.childWatchers=(0,u.toArray)(t.base.element.childNodes).map(function(n,r){var o=new t.BaseWatcher(n,(0,u.objectAssign)({},t.base.obdata),e,null,t.base.modelExtractId,t.base.components,t.base,t.base.getChildId(r));return e=o,o})}())}},{key:"__handleResolvedInstructions",value:function(){var t={shouldRender:null,shouldRenderHtml:!1,shouldInit:null};for(var n in this.resolvedInstructions){var r=this.resolvedInstructions[n];this[e.instructionsHandle[n]](r,t)}return t.shouldInit=t.shouldRender&&0===this.renderCount,0!==this.renderCount||t.shouldInit||this.renderCount--,t}},{key:"__handleIfInstruction",value:function(e,t){return e}},{key:"__handleElseIfInstruction",value:function(e,t){var n=this.__handleIfInstruction(e,t),r=this.__handleElseInstruction(e,t);return t.shouldRender=n&&r}},{key:"__handleElseInstruction",value:function(e,t){var n=this,r=!1,o=!0;if(this.base.traversalPrevious(function(e){return e.obtype===n.BaseWatcher.TextWatcher||e.obtype!==n.BaseWatcher.ManagerWatcher&&(!e.obwatcher.hasElseInstruction()&&(null!==e.obwatcher.renderInf.shouldRender&&(e.obwatcher.renderInf.shouldRender===!0&&(o=!1),e.obwatcher.hasIfInstruction()?(r=!0,!1):void 0)))}),!r)throw new SyntaxError("Unexpected else");return t.shouldRender=o,o}},{key:"__handleHtmlInstruction",value:function(e,t){t.shouldRenderHtml=!0}}]),e}();l.instructions=["data-if","data-else","data-else-if","data-html"],l.escapeNode=["script"],l.instructionsHandle=(a={},r(a,l.instructions[0],"__handleIfInstruction"),r(a,l.instructions[1],"__handleElseInstruction"),r(a,l.instructions[2],"__handleElseIfInstruction"),r(a,l.instructions[3],"__handleHtmlInstruction"),a),t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),u=(n(2),n(13)),c=r(u),l=function(){function e(t,n){a(this,e),this.base=t,this.BaseWatcher=n,this.instruction=this.__getInstruction(),this.vector=null,this.model=this.__getModel(),this.parameter=this.__getParameter(),this.childWacther=null,this.__check(),this.__removeRootElement()}return i(e,[{key:"render",value:function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};this.childWacther=this.__setChildWatcher(),this.__appendChildWatcherToDOM()}},{key:"reset",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},arguments[1]),t=arguments[2];e[this.vector].length!==t[this.vector].length&&(this.childWacther.forEach(function(e){var t=e.element;t.parentNode.removeChild(t)}),this.render())}},{key:"__appendChildWatcherToDOM",value:function(){var e=this,t=document.createDocumentFragment(),n=this.base.pastDOMInformation.nextSibling;this.childWacther.forEach(function(e){t.appendChild(e[0])}),n?n.parentNode.insertBefore(t,n):this.base.pastDOMInformation.parentNode.appendChild(t),this.childWacther=this.childWacther.map(function(t){return new(Function.prototype.bind.apply(e.BaseWatcher,[null].concat(o(t))))})}},{key:"__check",value:function(){var e=/[a-zA-Z_$][a-zA-Z_$0-9]*(\s*,\s*[a-zA-Z_$][a-zA-Z_$0-9]*){0,2}\s*in\s*/.test(this.instruction.value);if(!e)throw""}},{key:"__setChildWatcher",value:function(){var e=this,t=new Function("data","with(data) { return "+this.vector+" }")(this.base.obdata),n=[];return(0,c.default)(t,function(t,r){var o=(0,s.objectAssign)({},e.base.obdata);o[e.parameter[0]]=t,e.parameter[1]&&(o[e.parameter[1]]=r),n.push([e.__cloneElement(e.base.element.innerHTML),o,e.base.previous,null,e.base.modelExtractId,e.base.components,e.base,e.base.getChildId(r)])}),n}},{key:"__removeRootElement",value:function(){var e=this.base.element;e.parentNode.removeChild(e)}},{key:"__cloneElement",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=this.base.element.cloneNode();return n.innerHTML=t,n.removeAttribute(e.instructions[0]),n}},{key:"__getModel",value:function(){var t=this,n=[],r=!1;return this.base.modelExtract(this.instruction.value).forEach(function(o){r&&n.push(o.value),o.value===e.eachSplitInstructionChar&&(r=!0,t.vector=t.instruction.value.slice(o.index+e.eachSplitInstructionChar.length).replace(/\s/g,""))}),n.length>0?n:null}},{key:"__getParameter",value:function(){var t=[],n=!1;return this.base.modelExtract(this.instruction.value).forEach(function(r){r.value===e.eachSplitInstructionChar&&(n=!0),!n&&t.push(r.value)}),t}},{key:"__getInstruction",value:function(){return this.base.__filterAttr(e.instructions,!0)[0]}}]),e}();l.instructions=["data-each"],l.eachSplitInstructionChar="in",t.default=l},function(e,t,n){"use strict";function r(e,t){if(!(0,o.is)(t,"function"))throw new TypeError("cb is not a function");if((0,o.is)(e,"array"))e.forEach(function(e,n){t(n,n)});else if((0,o.is)(e,"object")){var n=0;for(var r in e)e.hasOwnProperty(r)&&t(r,n++)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(1)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(15),s=r(i),u=n(3),c=(n(1),function(){function e(t){o(this,e),this.base=t,this.watcherType=this.base.pastDOMInformation.nodeType,this.vm=this.__getViewModel(),this.model=this.__parseModel(),this.view=null}return a(e,[{key:"render",value:function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};this.view=this.__parseView(),this.watcherType===e.textNodeWatcher?this.base.element.textContent=this.view:this.base.element.innerHTML=this.view}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=arguments[1],n=arguments[2];t!==n&&this.render(e)}},{key:"__getViewModel",value:function(){var t=this.watcherType===e.textNodeWatcher,n=t?this.base.pastDOMInformation.textContent:this.base.pastDOMInformation.innerHTML;return this.__replaceOnceStatement(this.base.statementExtract(n))}},{key:"__replaceOnceStatement",value:function(e){var t=this;return e.map(function(e){return e.type===u.ONCE_STATEMENT_TYPE&&(e.type=u.CONST_STRING,e.value=t.base.execStatement(e.value)),e})}},{key:"__parseView",value:function(){var e=this,t="";return this.vm.forEach(function(n){t+=n.type===u.NOR_STATEMENT_TYPE?e.__toString(e.base.execStatement(n.value)):e.__toString(n.value)}),t}},{key:"__toString",value:function(e){return(0,s.default)(e)}},{key:"__parseModel",value:function(){var e=this,t=[];return this.vm.forEach(function(n){n.type===u.NOR_STATEMENT_TYPE&&e.base.modelExtract(n.value).forEach(function(e){t.push(e.value)})}),t}}]),e}());c.textNodeWatcher=3,c.innerHTMLWatcher=1,t.default=c},function(e,t){"use strict";function n(e){var t=e.nodeName.toLowerCase(),n=toArray(e.attributes).map(function(e){return e.name+"='"+e.value+"'"}).join("s");return"<"+t+" "+n+">"+e.innerHTML+"</"+t+">"}function r(e){return e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e instanceof HTMLElement?n(e):r(e)}}]);